<!DOCTYPE html>
<!--
* CoreUI - Free Bootstrap Admin Template
* @version v2.0.0
* @link https://coreui.io
* Copyright (c) 2018 creativeLabs Łukasz Holeczek
* Licensed under MIT (https://coreui.io/license)
-->
{% extends "dist/base.html" %}
{% load staticfiles %}
{% block title %}
    <title>运维管理平台</title>
    <style>
        .tags-wrap {
            border: 1px solid #ccc;
            min-height: 24px;
        }

        .tags-wrap .tag {
            display: inline-block;
            line-height: 18px;
            padding: 2px 20px 2px 5px;
            background-color: #00aced;
            color: #fff;
            font-size: 12px;
            margin: 3px;
            position: relative;
        }

        .tags-wrap .tag .tag-remove {
            position: absolute;
            width: 10px;
            right: 0px;
            top: 0px;
        }
    </style>
{% endblock %}
{% block content %}
    <body class="app header-fixed sidebar-fixed aside-menu-fixed sidebar-lg-show">
    <header class="app-header navbar">
        <button class="navbar-toggler sidebar-toggler d-lg-none mr-auto" type="button" data-toggle="sidebar-show">
            <span class="navbar-toggler-icon"></span>
        </button>
        <a class="navbar-brand" href="#">
            <img class="navbar-brand-full" src="{% static 'img/brand/logo.svg' %}" width="89" height="25"
                 alt="CoreUI Logo">
            <img class="navbar-brand-minimized" src="{% static "img/brand/sygnet.svg" %}" width="30" height="30"
                 alt="CoreUI Logo">
        </a>
        <button class="navbar-toggler sidebar-toggler d-md-down-none" type="button" data-toggle="sidebar-lg-show">
            <span class="navbar-toggler-icon"></span>
        </button>
        <ul class="nav navbar-nav d-md-down-none">
            <li class="nav-item px-3">
                <a class="nav-link" href="/main">Dashboard</a>
            </li>
            <li class="nav-item px-3">
                <a class="nav-link" href="#">Users</a>
            </li>
            <li class="nav-item px-3">
                <a class="nav-link" href="#">Settings</a>
            </li>
        </ul>
        <ul class="nav navbar-nav ml-auto">
            <li class="nav-item d-md-down-none">
                <a class="nav-link" href="#">
                    <i class="icon-bell"></i>
                    <span class="badge badge-pill badge-danger">5</span>
                </a>
            </li>
            <li class="nav-item d-md-down-none">
                <a class="nav-link" href="#">
                    <i class="icon-list"></i>
                </a>
            </li>
            <li class="nav-item d-md-down-none">
                <a class="nav-link" href="#">
                    <i class="icon-location-pin"></i>
                </a>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link" data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
                   aria-expanded="false">
                    <img class="img-avatar" src="{% static "img/avatars/6.jpg" %}" alt="{{ username }}">
                    {{ username }}
                </a>
                <div class="dropdown-menu dropdown-menu-right">
                    <div class="dropdown-header text-center">
                        <strong>Account</strong>
                    </div>
                    <div class="dropdown-header text-center">
                        <strong>设置</strong>
                    </div>
                    <a class="dropdown-item" href="#">
                        <i class="fa fa-user"></i> Profile</a>
                    <a class="dropdown-item" href="#">
                        <i class="fa fa-wrench"></i> Settings</a>
                    <a class="dropdown-item" href="#">
                        <i class="fa fa-usd"></i> Payments
                        <span class="badge badge-secondary">42</span>
                    </a>
                    <a class="dropdown-item" href="#">
                        <i class="fa fa-file"></i> Projects
                        <span class="badge badge-primary">42</span>
                    </a>
                    <div class="divider"></div>
                    <a class="dropdown-item" href="#">
                        <i class="fa fa-shield"></i> Lock Account</a>
                    <a class="dropdown-item" href="#" id="Logout">
                        <i class="fa fa-lock"></i> Logout</a>
                </div>
            </li>
        </ul>
        <button class="navbar-toggler aside-menu-toggler d-md-down-none" type="button"
                data-toggle="aside-menu-lg-show">
            <span class="navbar-toggler-icon"></span>
        </button>
        <button class="navbar-toggler aside-menu-toggler d-lg-none" type="button" data-toggle="aside-menu-show">
            <span class="navbar-toggler-icon"></span>
        </button>
    </header>
    <div class="app-body">
        <div class="sidebar">
            <nav class="sidebar-nav">
                <ul class="nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/main">
                            <i class="nav-icon icon-speedometer"></i> Dashboard
                            <span class="badge badge-primary">NEW</span>
                        </a>
                    </li>
                    <li class="nav-title">系统设置</li>
                    {% if menulist %}
                        {% for menu in menulist %}
                            <li class="nav-item nav-dropdown">
                                <a class="nav-link nav-dropdown-toggle" href="colors.html">
                                    <i class="nav-icon icon-drop"></i>{{ menu.name }}</a>
                                <ul class="nav-dropdown-items">
                                    {% if submenulist %}
                                        {% for submenu in submenulist %}
                                            {% if submenu.parent_id == menu.id %}
                                                <li class="nav-item">
                                                    <a class="nav-link" id="addUser" href="{{ submenu.url }}">
                                                        <i class="nav-icon icon-puzzle"></i>{{ submenu.name }}</a>
                                                </li>

                                            {% endif %}
                                        {% endfor %}
                                    {% endif %}
                                </ul>
                            </li>
                        {% endfor %}
                    {% endif %}
                    <li class="nav-item nav-dropdown">
                        <a class="nav-link nav-dropdown-toggle" href="colors.html">
                            <i class="nav-icon icon-drop"></i>屏体检查</a>
                        <ul class="nav-dropdown-items">
                            <li class="nav-item">
                                <a class="nav-link" id="addUser" href="{% url 'kalaite' %}">
                                    <i class="nav-icon icon-puzzle"></i>"卡莱特统计"</a>
                            </li>

                        </ul>
                    </li>


                    <li class="nav-item nav-dropdown">
                        <a class="nav-link nav-dropdown-toggle" href="colors.html">
                            <i class="nav-icon icon-drop"></i>邮件服务</a>
                        <ul class="nav-dropdown-items">
                            <li class="nav-item">
                                <a class="nav-link" href="base/mailsetting.html">
                                    <i class="nav-icon icon-puzzle"></i>邮箱服务设置</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="base/mailtemplate.html">
                                    <i class="nav-icon icon-puzzle"></i>设置告警模板</a>
                            </li>
                        </ul>
                    </li>

                    <li class="nav-title">应用设置</li>
                    <li class="nav-item nav-dropdown">
                        <a class="nav-link nav-dropdown-toggle" href="#">
                            <i class="nav-icon icon-drop"></i>主机管理</a>
                        <ul class="nav-dropdown-items">
                            <li class="nav-item">
                                <a class="nav-link" href="base/addhost.html">
                                    <i class="nav-icon icon-puzzle"></i>添加主机</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="base/drophost.html">
                                    <i class="nav-icon icon-puzzle"></i>删除主机</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="base/assignhost.html">
                                    <i class="nav-icon icon-puzzle"></i>添加到主机组</a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-item nav-dropdown">
                        <a class="nav-link nav-dropdown-toggle" href="#">
                            <i class="nav-icon icon-cursor"></i>主机组管理</a>
                        <ul class="nav-dropdown-items">
                            <li class="nav-item">
                                <a class="nav-link" href="base/addhost.html">
                                    <i class="nav-icon icon-puzzle"></i>添加主机组</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="base/drophost.html">
                                    <i class="nav-icon icon-puzzle"></i>删除主机组</a>
                        </ul>
                    </li>
                    <li class="nav-item nav-dropdown">
                        <a class="nav-link nav-dropdown-toggle" href="#">
                            <i class="nav-icon icon-cursor"></i>运维管理</a>
                        <ul class="nav-dropdown-items">
                            <li class="nav-item">
                                <a class="nav-link" href="base/password.html">
                                    <i class="nav-icon icon-puzzle"></i>修改主机密码</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="base/appdeploy.html">
                                    <i class="nav-icon icon-puzzle"></i>应用部署</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="{% url 'analyze' %}">
                                    <i class="nav-icon icon-puzzle"></i>jenkins发布统计</a>
                            </li>
                        </ul>
                    </li>

                    <li class="nav-item nav-dropdown">
                        <a class="nav-link nav-dropdown-toggle" href="#">
                            <i class="nav-icon icon-drop"></i>监控报表</a>
                        <ul class="nav-dropdown-items">
                            <li class="nav-item">
                                <a class="nav-link" href="base/monitorsource.html">
                                    <i class="nav-icon icon-puzzle"></i>设置监控源</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="base/export.html">
                                    <i class="nav-icon icon-puzzle"></i>导出监控报表</a>
                        </ul>
                    </li>
                </ul>
            </nav>


        </div>

        <main class="main">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item" aria-current="page"><a href="/main">主页</a></li>
                    {% if not  is_main %}
                        {#        <li class="breadcrumb-item" aria-current="page"><a href="/main">主页</a></li>#}
                        <li class="breadcrumb-item" aria-current="page"><a href="#">{{ mainmenu }}</a></li>
                        <li class="breadcrumb-item" active><a href="{{ location_url }}">{{ submenu }}</a></li>
                    {% endif %}
                </ol>

            </nav>
            <div class="container-fluid">
                <div class="animated fadeIn">
                    <div class="card">
                        <div id='adduser' class="card-body adduser"
                             style="display:{{ displayAdduser|default:'none' }};">
                            <div id='add'>
                                <button class="btn-primary" name='add_btn' type='button' id='add_btn' value='添加用户'>
                                    添加用户
                                </button>
                                <form action="/addUser/" method="post" class="pull-right">
                                    {% csrf_token %}
                                    {{ userform }}
                                    <button type="submit" class="btn btn-success">搜索</button>
                                    <a href="{% url 'download' %}">下载模板</a>
                                </form>
                            </div>
                            <table class="table table-responsive-sm table-striped" id='userarea'
                                   border='1'
                                   class="display dataTable">
                                <thread>
                                    <tr style="text-align: center;">
                                        <th>用户名</th>
                                        <th>账号</th>
                                        <th>email邮箱</th>
                                        <th>用户管理</th>
                                        <th>修改用户信息</th>
                                        <th>上一次登录时间</th>
                                    </tr>
                                </thread>

                                {% if userlist %}
                                    {% for user in userlist %}
                                        <tr border='1' style="text-align: center;">
                                            <td>{{ user.first_name }}</td>
                                            <td>{{ user.username }}</td>
                                            <td>{{ user.email }}</td>
                                            <td>{% if user.is_active == 1 %}启用{% else %}
                                                禁用{% endif %}</td>
                                            <td width='53%' align='center'>修改密
                                                码:<input class='input-medium' type='password' id='resetpass'
                                                         name='resetpass'
                                                         placeholder='重置密码'/>启用/禁用:<input type='checkbox'
                                                                                          {% if user.is_active == 1 %}checked{% endif %}
                                                                                          id='enable'>&nbsp;&nbsp;&nbsp;&nbsp;<button
                                                        type='button' class='btn btn-success' id='commit' name='commit'
                                                        value='修改' disabled>修改
                                                </button>
                                            </td>
                                            <td>{{ user.last_login }}</td>
                                        </tr>
                                    {% endfor %}
                                {% endif %}
                            </table>
                            <nav aria-label="Page navigation example">
                                    <div class="pull-right">
                                        <div class="input-group">peer page:<select class="form-control"><option>10</option><option>50</option><option>100</option></select><ul class="pagination">

                                        <li class="page-item"><a class="page-link" href="/addUser?page=


                                                {% if userlist.has_previous %}{{ userlist.previous_page_number }}{% else %}1{% endif %}{% if search_username %}&&search_username={{ search_username }}{% endif %}">上一页</a>
                                        </li>
                                        {% for page in page_range %}
                                            <li class="page-item  {% if page == page_user %}active{% endif %}"><a
                                                    class="page-link"
                                                    href="/addUser?page={{ page }}{% if search_username %}&&search_username={{ search_username }}{% endif %}">{{ page }}</a>
                                            </li>
                                        {% endfor %}


                                        <li class="page-item"><a class="page-link" href="/addUser?page={% if userlist.has_next %}{{ userlist.next_page_number }}{% else %}1{% endif %}{% if search_username %}&&search_username={{ search_username }}{% endif %}">下一页</a>
                                        </li>

                                    </ul></div>

                                    </div>
                            </nav>
                        </div>
                    </div>
                    <div class="card-header"></div>
                    <div id='deluser' class="card-body deluser"
                         style="display:{{ displayDeluser|default:'none' }};">
                        <div id='add' class="container-fluid">
                            <button class="btn btn-danger pull-left" name='del_btn' type='button' id='del_btn' value='批量删除用户'
                            disabled>批量删除用户
                            </button>
                            <form action="/dropUser/" method="post" class="pull-right">
                                {% csrf_token %}
                                {{ form }}
                                <button type="submit" class="btn btn-info">搜索</button>
                            </form>


                        </div>
                        <table class="table table-responsive-sm table-striped" id='userlist' border='1'>
                            <tr style="text-align: center;">
                                <th>id</th>
                                <th>用户名</th>
                                <th>邮箱地址</th>
                                <th>用户状态</th>
                                <th>修改</th>
                            </tr>
                            {% if userlist %}
                                {% for user in userlist %}
                                    <tr border='1'>
                                        <td width='6%' align='center'><input type='checkbox' id='id'
                                                                             value='{{ user.id }}'></td>
                                        <td width='6%' align='center'>{{ user.username }}</td>
                                        <td width='14%' align='center'>{{ user.email }}</td>
                                        <td width='21%' align='center'>{% if user.status == 1 %}启用{% else %}
                                            禁用{% endif %}</td>
                                        <td width='53%' align='center'>
                                            <button class='btn-danger' type='button' id='del_single'
                                                    name='del_single' value='删除'
                                                    disabled>删除
                                            </button>
                                        </td>
                                    </tr>
                                {% endfor %}
                            {% endif %}
                        </table>
                        <nav aria-label="Page navigation example">
                            <ul class="pagination pull-right">

                                <li class="page-item"><a class="page-link" href="/dropUser?page=
                      {% if userlist.has_previous %}{{ userlist.previous_page_number }}{% else %}1{% endif %}">上一页</a>
                                </li>

                                {% for page in userlist.paginator.page_range %}
                                    <li class="page-item {% if page|lower == page_user %}active{% endif %}"><a
                                            class="page-link"
                                            href="/dropUser?page={{ page }}">{{ page }}</a>
                                    </li>
                                {% endfor %}


                                <li class="page-item"><a class="page-link" href="/dropUser?page=
                      {% if userlist.has_next %}{{ userlist.next_page_number }}{% else %}1{% endif %}">下一页</a>
                                </li>

                            </ul>
                        </nav>
                    </div>
                    <div id='addrole' class="card-body addrole"
                         style="display:{{ displayAddrole|default:'none' }};">
                        <button class="btn-primary" name='addrole_btn' type='button' id='addrole_btn' value='添加角色'/>
                        添加角色</button>
                        <form class="pull-right" action="/addRole" method="post">
                            {% csrf_token %}
                            {{ roleform }}
                            <button type="submit" class="btn btn-info">搜索</button>
                        </form>
                        <table class="table table-striped table-bordered table-hover table-condensed" id='rolearea'
                               class="dataTable" width='1661' border='1'>
                            <tr>
                                <td width='6%' align='center'><h4>id</h4></td>
                                <td width='6%' align='center'><h4>组名</h4></td>
                                <td width='53%' align='center'><h4>所有用户</h4></td>
                                <td width='21%' align='center'><h4>关联用户</h4></td>
                            </tr>
                            {% if rolelist %}
                                {% for role in rolelist %}
                                    <tr border='1'>
                                        <td width='6%' align='center'>{{ role.id }}</td>
                                        <td width='6%' align='center'>{{ role.name }}</td>
                                        <td width='21%' align='center'>
                                            {% for user in role.user_set.values %}{{ user.username }}&nbsp;&nbsp;
                                                &nbsp;
                                                &nbsp;{% endfor %}</td>
                                        <td width='53%' align='center'><img src="{% static "icons/add.png" %}"
                                                                            id='assign' name='assign'
                                                                            height='20' width='20'
                                                                            data-toggle="tooltip" title="添加用户到角色">&nbsp;&nbsp;&nbsp;<img
                                                src="{% static "icons/del.png" %}" id='remove' name='remove'
                                                height='20' width='20'
                                                data-toggle="tooltip" title="从角色中移除用户">&nbsp;&nbsp;<img
                                                src="{% static "icons/privi.jpg" %}" id='alloc_privi'
                                                name='alloc_privi'
                                                height='20' width='20'
                                                data-toggle="tooltip" title="给角色分配权限"></td>
                                        </td></tr>
                                {% endfor %}
                            {% endif %}
                        </table>
                        <nav aria-label="Page navigation example">
                            <ul class="pagination pull-right">
                                <li class="page-item"><a class="page-link" href="/addRole?page_role=


                                        {% if rolelist.has_previous %}{{ page_role|add:'-1' }}{% else %}1{% endif %}">上一页</a>
                                </li>
                                {#              {% for page in rolelist.paginator.page_range %}#}
                                {#                              {{ page_number }}#}
                                {% for page in page_number %}
                                    <li class="page-item {% if page_role == page|lower %}active{% endif %}"><a
                                            class="page-link" href="/addRole?page_role={{ page }}">{{ page }}</a>
                                    </li>
                                {% endfor %}



                                <li class="page-item"><a class="page-link" href="/addRole?page_role=


                                        {% if rolelist.has_next %}{{ page_role|add:'1' }}{% else %}1{% endif %}">下一页</a>
                                </li>

                            </ul>
                        </nav>

                    </div>
                    <div id='droprole' class="card-body droprole"
                         style="display:{{ displayDelrole|default:'none' }};">
                        <button class='btn-danger' name='del_btn' type='button' id='del_btn' value='批量删除角色'
                                disabled/>
                        批量删除角色</button>
                        <form class="pull-right" action="/dropRole/" method="post">
                            {% csrf_token %}
                            {{ form }}
                            <button type="submit" class="btn btn-info">搜索</button>
                        </form>
                        <table class="table table-striped table-bordered table-hover table-condensed" id='rolelist'
                               class="dataTable" width='1661' border='1'>
                            <tr>
                                <td width='6%' align='center'><h4>id</h4></td>
                                <td width='6%' align='center'><h4>角色</h4></td>
                                <td width='21%' align='center'><h4>所有用户</h4></td>
                                <td width='53%' align='center'><h4>删除</h4></td>
                            </tr>
                            {% if rolelist %}
                                {% for role in rolelist %}
                                    <tr border='1'>
                                        <td width='6%' align='center'><input type='checkbox' id='role_id'
                                                                             value='{{ role.id }}'
                                                                             {% if role.userlist %}disabled{% endif %}>
                                        </td>
                                        <td width='6%' align='center'>{{ role.name }}</td>
                                        <td width='21%' align='center'>
                                            {% for user in role.user_set.values %}{{ user.username }}&nbsp;&nbsp;
                                                &nbsp;
                                                &nbsp;{% endfor %}</td>
                                        <td width='53%' align='center'>&nbsp;&nbsp;&nbsp;&nbsp;<button
                                                class='btn-danger' type='button'
                                                id='delrole_commit'
                                                name='delrole_commit' value='删除'
                                                disabled>删除
                                        </button>
                                        </td>
                                        </td></tr>
                                {% endfor %}
                            {% endif %}
                        </table>

                        <nav aria-label="Page navigation example">
                            <ul class="pagination pull-right">

                                <li class="page-item"><a class="page-link" href="/dropRole?page_role=
                      {% if rolelist.has_previous %}{{ rolelist.previous_page_number }}{% else %}1{% endif %}">上一页</a>
                                </li>

                                {% for page in rolelist.paginator.page_range %}
                                    <li class="page-item {% if page_role == page|lower %}active{% endif %}"><a
                                            class="page-link"
                                            href="/dropRole?page_role={{ page }}">{{ page }}</a>
                                    </li>
                                {% endfor %}


                                <li class="page-item"><a class="page-link" href="/delrole?page_role=
                      {% if rolelist.has_next %}{{ rolelist.next_page_number }}{% else %}1{% endif %}">下一页</a>
                                </li>

                            </ul>
                        </nav>

                    </div>
                    <div id='menumanager' class="card-body menumanager" data-spy="scroll" data-target="#menulist"
                         style="display:{{ displayMenu|default:'none' }};">
                        <div class="card">
                            <div class="card-header">
                                <form action="/addmenu" method="post">
                                    <button class="btn btn-primary btn-link pull-left" type="button" id="menu_add"
                                            value="添加主菜单">添加主菜单
                                    </button>
                                </form>
                            </div>
                            <div class="card-body" id="menulist">
                                {% if menulist %}
                                    {% for menu in menulist %}
                                        <ul class="card">
                                            <li class="nav-item nav-dropdown">
                                                <div class="row card-header"><i
                                                        class="nav-icon icon-folder-alt pull-left"></i><input
                                                        type="hidden" value="{{ menu.id }}">
                                                    <p col-md-3 class="text-primary">{{ menu.name }}</p>
                                                    <button id="add_submenu"
                                                            class="btn btn-primary col-sm-2 offset-sm-6"
                                                            value="添加子菜单">添加子菜单
                                                    </button>
                                                    <button id="del_menu"
                                                            class="btn btn-secondary offset-sm-1 pull-right  value="
                                                            删除主菜单
                                                    ">删除主菜单</button>
                                                </div>
                                                <ul class="nav-dropdown-items card-body">
                                                    {% if submenulist %}
                                                        {% for submenu in submenulist %}
                                                            {% if submenu.parent_id == menu.id %}
                                                                <div class="row">
                                                                    <li class="nav-item icon-film"></li>
                                                                    <p class="text-info col-sm-3">{{ submenu.name }}</p>

                                                                    <button id="edit_submenu"
                                                                            class="btn btn-primary btn-github">修改
                                                                    </button>
                                                                    <button id="del_submenu"
                                                                            class="btn btn-danger  offset-sm-1 pull-right">
                                                                        删除
                                                                    </button>
                                                                    <input type="hidden" name="menu_url"
                                                                           class="pull-right"
                                                                           value="{{ submenu.url }}">
                                                                    <input type="hidden" name="menu_id"
                                                                           class="pull-right"
                                                                           value="{{ submenu.id }}">
                                                                </div>
                                                                <hr>
                                                            {% endif %}
                                                        {% endfor %}
                                                    {% endif %}
                                                </ul>
                                            </li>
                                        </ul>

                                    {% endfor %}
                                {% endif %}
                            </div>
                        </div>
                        <div id="menuwarning" class="alert alert-warning alert-dismissible fade show" role="alert">
                            <strong>Holy guacamole!</strong> You should check in on some of those fields below.
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>


                    </div>
                    {% block customer %}
                    {% endblock %}

                    <div id="dashboard" style="display:{{ displayDashboard|default:'none' }}">
                        <div class="row">
                            <div class="col-xs-12 col-md-6">
                                <div class="card">
                                    <div class="card-header"><h3>内存使用情况</h3></div>
                                    <div class="card-body">
                                        <div class="chart-wrapper">
                                            <canvas id="canvas-1"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-12 col-md-6">
                                <div class="card">
                                    <div class="card-header"><h3>CPU使用情况</h3></div>
                                    <div class="card-body">
                                        <div class="chart-wrapper">
                                            <canvas id="canvas-2"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>


                        </div>
                        <div class="row">
                            <div class="col-xs-12 col-md-6">
                                <div class="card">
                                    <div class="card">
                                        <div class="card-header"><h3>磁盘使用情况</h3></div>
                                        <div class="card-body">
                                            <div class="chart-wrapper">
                                                <canvas id="canvas-3"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-12 col-md-6">
                                <div class="card">
                                    <div class="card">
                                        <div class="card-header"><h3>当前在线用户</h3></div>
                                        <div class="card-body">
                                            <div class="chart-wrapper">
                                                <canvas id="canvas-4" style="align:center;">aaaa</canvas>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                        </div>
                    </div>
                </div>
        </main>
    </div>
    <div class="modal fade" id="userAddModal" tabindex="-2" role="dialog"
         aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="dialog">
            <div class="modal-content" style="zindex:2;">
                <div class="modal-header">
                    <h4 class="modal-title" id="gridSystemModalLabel">添加用户</h4>
                    <button type="button" class="close button-default" data-dismiss="modal"
                            aria-hidden="true"
                            style="border:1px;algin:left;"/>
                </div>
                <div class="modal-body  close" style="z-index:10;">
                    <table>
                        <tr>
                            <td width="27%">账号：</td>
                            <td width="73%"><label>
                                <input class="form-control" name="username" type="text" id="username"/>
                            </label></td>
                        </tr>
                        <tr>
                            <td>用户名：</td>
                            <td><label>
                                <input class="form-control" name="nicename" type="text" id="nicename"/>
                            </label></td>
                        </tr>
                        <tr>
                            <td>密码：</td>
                            <td><label>
                                <input class="form-control" name="passwd" type="password" id="passwd"/>
                            </label></td>
                        </tr>
                        <tr>
                            <td>密码确认:</td>
                            <td><label>
                                <input class="form-control" type="password" name="reptpass" id="reptpass"/>
                            </label></td>
                        </tr>
                        <tr>
                            <td>邮箱地址:</td>
                            <td><label>
                                <input class="form-control" name="email" type="text" id="email"/>
                            </label></td>
                        </tr>
                        <tr>
                            <td><label>
                                <button class='btn-info' name="add" type="button" id="add" value="添加" disabled/>
                                添加</button>
                            </label></td>
                            <td align="center"><label>
                                <button class='btn-info' name="cancle" type="button" id="cancle" value="取消"/>
                                取消</button>
                            </label></td>
                        </tr>
                    </table>
                </div>

            </div>

        </div>

    </div>
    <div class="modal fade" id="roleAddModal" tabindex="-2" role="dialog"
         aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="dialog">
            <div class="modal-content" style="zindex:2;">
                <div class="modal-header">
                    <h4 class="modal-title" id="gridSystemModalLabel">添加角色</h4>
                    <button type="button" class="close button-default" data-dismiss="modal"
                            aria-hidden="true"
                            style="border:1px;algin:left;"/>
                </div>
                <div class="modal-body  close" style="z-index:10;">
                    <table border="1" align="center">
                        <tr>
                            <td>角色名称：</td>
                            <td><label>
                                <input class="form-control" name="rolename" type="text" id="rolename"/>
                            </label></td>
                        </tr>
                        <tr>
                            <td><label>
                                <button class="btn-info" name="add" type="button" id="add" value="添加" disabled/>
                                添加</button>
                            </label></td>
                            <td align="center"><label>
                                <button class="btn-info" name="cancle" type="button" id="cancle" value="取消"/>
                                取消</button>
                            </label></td>
                        </tr>
                    </table>
                </div>

            </div>

        </div>

    </div>
    <div class="modal fade" id="userAssignRoleModal" tabindex="-2" role="dialog"
         aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="dialog">
            <div class="modal-content" style="zindex:2;">
                <div class="modal-header">
                    <h4 class="modal-title" id="gridSystemModalLabel">关联用户到角色</h4>
                    <button type="button" class="close button-default" data-dismiss="modal"
                            aria-hidden="true"
                            style="border:1px;algin:left;"/>
                </div>
                <div class="modal-body  close" style="z-index:10;">
                    <table border="1" align="center">
                        <tr>
                            <td>角色名称：</td>
                            <td><label>
                                <input class="form-control" name="rolename" type="text" id="rolename" readonly/>
                            </label></td>
                        </tr>
                        <tr>
                            <td>现有用户：</td>
                            <td>
                                {#                <textarea class="form-control" name="container_user"  id="container_user" row="5" readonly></textarea>#}
                                <div class="tags-wrap" id="container_user"></div>
                                </label></td>
                        </tr>
                        <tr>
                            <td>用户列表</td>
                            <td><label>
                                <div class="btn-group">
                                    <button type="button" class="btn btn-default dropdown-toggle"
                                            data-toggle="dropdown" id="add">
                                        添加 <span class="caret"></span>
                                    </button>
                                    {% if allusers %}
                                        <select class="form-control" id="userSelect">
                                            {% for user in allusers %}
                                                <option id="{{ user.id }}">{{ user.username }}</option>
                                            {% endfor %}
                                        </select>
                                    {% endif %}
                                </div>
                            </label></td>
                        </tr>
                        <tr>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td><label>
                                <button class="btn-info" name="confirm" type="button" id="confirm" value="确定"/>
                                确定</button>
                            </label></td>
                            <td align="center"><label>
                                <button class="btn-info" name="cancle" type="button" id="cancle" value="取消"/>
                                取消</button>
                            </label></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="removeAssignRoleModal" tabindex="-2" role="dialog" aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="dialog">
            <div class="modal-content" style="zindex:2;">
                <div class="modal-header">
                    <h4 class="modal-title" id="gridSystemModalLabel">从角色中移除用户</h4>
                    <button type="button" class="close button-default" data-dismiss="modal"
                            aria-hidden="true"
                            style="border:1px;algin:left;"/>
                </div>
                <div class="modal-body  close" style="z-index:10;">
                    <table border="1" align="center">
                        <tr>
                            <td>角色名称：</td>
                            <td><label>
                                <input class="form-control" name="rolename" type="text" id="rolename" readonly/>
                            </label></td>
                        </tr>
                        <tr>
                            <td>现有用户：</td>
                            <td>
                                <div class="tags-wrap" id="container_user"></div>
                            </td>
                            {#                <textarea class="form-control" name="container_user"  id="container_user" row="5" readonly></textarea>#}
                            {#              </label></td>#}
                        </tr>
                        <tr>

                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td><label>
                                <button class="btn-info" name="confirm" type="button" id="confirm" value="确定"/>
                                确定</button>
                            </label></td>
                            <td align="center"><label>
                                <button class="btn-info" name="cancle" type="button" id="cancle" value="取消"/>
                                取消</button>
                            </label></td>
                        </tr>
                    </table>
                </div>

            </div>

        </div>

    </div>
    <div class="modal fade" id="menuAddModal" tabindex="-2" role="dialog" aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content" style="zindex:2;">
                <div class="modal-header">
                    <h4 class="modal-title" id="gridSystemModalLabel">添加菜单</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body pull-left">
                    <form action="/menumanager/addmenu/" method="post">
                        {% csrf_token %}
                        {{ form }}
                        <button type="submit" class="btn btn-foursquare fa-pull-right">新增</button>
                    </form>

                </div>
                <div class="modal-footer"></div>

            </div>

        </div>

    </div>
    <div class="modal fade" id="submenuAddModal" tabindex="-2" role="dialog" aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content" style="zindex:2;">
                <div class="modal-header">
                    <h4 class="modal-title" id="gridSystemModalLabel">添加子菜单</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body pull-left">
                    <form id="submenu" action="/menumanager/addsubmenu/" method="post">
                        {% csrf_token %}
                        {{ submenuform }}
                        <button type="submit" class="btn btn-foursquare fa-pull-right">新增</button>
                    </form>

                </div>
                <div class="modal-footer"></div>

            </div>

        </div>

    </div>
    <div class="modal" id="delmenuModal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <h4>提示信息:</h4>
                    </div>
                    <button type="button" class="close pull-right" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body">您确认要删除吗？</div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-success" data-dismiss="modal">确认</button>
                    <butthon type="button" class="btn btn-default" data-dismiss="modal">取消</butthon>
                </div>
            </div>
        </div>
    </div>
    <div class="modal" id="editmenuModal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <h4>修改菜单信息:</h4>
                    </div>
                    <button type="button" class="close pull-right" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body pull-right">
                    <form action="/menumanager/editmenu/" method="post">
                        {% csrf_token %}
                        {{ editmenuform }}
                        <input type="hidden" name="menu_id" id="menu_id" value="">
                        <button type="submit" class="btn btn-github pull-right">修改</button>
                    </form>
                </div>
                <div class="modal-footer"></div>

            </div>
        </div>
    </div>
    <div class="modal  fade" id="privilegeModal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content" style="width:750px;border:2px solid #f2f2f2">
                <div class="modal-header">
                    <div class="modal-title">
                        <h4>分配权限:</h4>
                    </div>
                    <button type="button" class="close pull-right" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body pull-right align-content-lg-center">
                    {% if privilist %}
                        {% for priv in privilist %}
                            <div class="row">
                                <input type="checkbox" class="form-check" value="{{ priv.id }}">
                                <span class="text-body font-2xl"><h4>{{ priv.privilege_name }}</h4></span></div>
                            <div class="row">
                                {% for subpriv in subprivlist %}
                                    {% if subpriv.pid == priv.id %}
                                        <input type="checkbox" class="form-check col-sm-1" value="{{ subpriv.id }}">
                                        <span class="text-info font-1xl"><h5>{{ subpriv.privilege_name }}</h5></span>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        {% endfor %}
                    {% endif %}
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary">确定</button>
                </div>

            </div>
        </div>
    </div>
    <footer class="app-footer row"><span style="align:center;">Copyright © 2007-2018 <a
            href="www.novastar.tech">NovaStar</a> Tech Co.,Ltd. All rights reserved</span></footer>


    <script type="text/javascript">
        {% block customer_script %}



            var ctx = document.getElementById("canvas-1").getContext('2d');
            var canvas1 = new Chart(ctx, {
                type: 'line',
                data: {
                    labels:{% autoescape off %} {{ createtime }} {% endautoescape %},
                    //labels: [ 'aaa','bbb','ccc','ddd','eee','fff'],
                    datasets: [{
                        label: '内存使用量统计(MB)',
                        data: {% autoescape on %} {{ memory }} {% endautoescape %},
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.2)',
                            'rgba(54, 162, 235, 0.2)',
                            'rgba(255, 206, 86, 0.2)',
                            'rgba(75, 192, 192, 0.2)',
                            'rgba(153, 102, 255, 0.2)',
                            'rgba(255, 159, 64, 0.2)'
                        ],
                        borderColor: [
                            'rgba(255,99,132,1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            //'rgba(255, 159, 64, 1)'
                        ],
                        borderWidth: 1
                    }, {
                        label: '内存spare统计(MB)',
                        data: {% autoescape on %} {{ memory_spare }} {% endautoescape %},
                        backgroundColor: [
                            'rgba(00, 200, 00, 0.4)',
                            'rgba(54, 162, 235, 0.2)',
                            'rgba(255, 206, 86, 0.2)',
                            'rgba(75, 192, 192, 0.2)',
                            'rgba(153, 102, 255, 0.2)',
                            'rgba(255, 159, 64, 0.2)'
                        ],
                        borderColor: [
                            'rgba(255,99,132,1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            //'rgba(255, 159, 64, 1)'
                        ],
                        borderWidth: 1
                    }]
                },

                options: {
                    scales: {
                        yAxes: [{
                            ticks: {
                                beginAtZero: true
                            }
                        }]
                    }
                }
            })
            var ctx1 = document.getElementById("canvas-2").getContext('2d');
            var canvas2 = new Chart(ctx1, {
                type: 'line',
                data: {
                    labels:{% autoescape off %} {{ createtime }} {% endautoescape %},
                    //labels: [ 'aaa','bbb','ccc','ddd','eee','fff'],
                    datasets: [{
                        label: 'CPU 5负载统计(MB)',
                        data: {% autoescape on %} {{ cpu_load_5 }} {% endautoescape %},
                        backgroundColor: [
                            'rgba(54, 162, 235, 0.2)',
                            'rgba(54, 162, 235, 0.2)',
                            'rgba(255, 206, 86, 0.2)',
                            'rgba(75, 192, 192, 0.2)',
                            'rgba(153, 102, 255, 0.2)',
                            'rgba(255, 159, 64, 0.2)'
                        ],
                        borderColor: [
                            'rgba(255,99,132,1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            //'rgba(255, 159, 64, 1)'
                        ],
                        borderWidth: 1
                    }, {
                        label: 'CPU 10负载统计(MB)',
                        data: {% autoescape on %} {{ cpu_load_10 }} {% endautoescape %},
                        backgroundColor: [
                            'rgba(54, 162, 235, 0.2)',
                            'rgba(54, 162, 235, 0.2)',
                            'rgba(255, 206, 86, 0.2)',
                            'rgba(75, 192, 192, 0.2)',
                            'rgba(153, 102, 255, 0.2)',
                            'rgba(255, 159, 64, 0.2)'
                        ],
                        borderColor: [
                            'rgba(255,99,132,1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            //'rgba(255, 159, 64, 1)'
                        ],
                        borderWidth: 1
                    }, {
                        label: 'CPU 15负载统计(MB)',
                        data: {% autoescape on %} {{ cpu_load_15 }} {% endautoescape %},
                        backgroundColor: [
                            'rgba(54, 162, 235, 0.2)',
                            'rgba(54, 162, 235, 0.2)',
                            'rgba(255, 206, 86, 0.2)',
                            'rgba(75, 192, 192, 0.2)',
                            'rgba(153, 102, 255, 0.2)',
                            'rgba(255, 159, 64, 0.2)'
                        ],
                        borderColor: [
                            'rgba(255,99,132,1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            //'rgba(255, 159, 64, 1)'
                        ],
                        borderWidth: 1
                    }]
                },

                options: {
                    scales: {
                        yAxes: [{
                            ticks: {
                                beginAtZero: true
                            }
                        }]
                    }
                }
            })
            var ctx2 = document.getElementById("canvas-3").getContext('2d');
            var canvas2 = new Chart(ctx2, {
                type: 'line',
                data: {
                    labels:{% autoescape off %} {{ createtime }} {% endautoescape %},
                    //labels: [ 'aaa','bbb','ccc','ddd','eee','fff'],
                    datasets: [{
                        label: '磁盘使用情况(MB)',
                        data: {% autoescape on %} {{ disk }} {% endautoescape %},
                        backgroundColor: [
                            'rgba(255, 206, 86, 0.2)',
                            'rgba(54, 162, 235, 0.2)',
                            'rgba(255, 206, 86, 0.2)',
                            'rgba(75, 192, 192, 0.2)',
                            'rgba(153, 102, 255, 0.2)',
                            'rgba(255, 159, 64, 0.2)'
                        ],
                        borderColor: [
                            'rgba(255,99,132,1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            //'rgba(255, 159, 64, 1)'
                        ],
                        borderWidth: 1
                    }, {
                        label: '磁盘spare情况(MB)',
                        data: {% autoescape on %} {{ disk_spare }} {% endautoescape %},
                        backgroundColor: [
                            'rgba(00, 200, 00, 0.4)',
                            'rgba(54, 162, 235, 0.2)',
                            'rgba(255, 206, 86, 0.2)',
                            'rgba(75, 192, 192, 0.2)',
                            'rgba(153, 102, 255, 0.2)',
                            'rgba(255, 159, 64, 0.2)'
                        ],
                        borderColor: [
                            'rgba(245,89,142,1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            //'rgba(255, 159, 64, 1)'
                        ],
                        borderWidth: 1
                    }]
                },

                options: {
                    scales: {
                        yAxes: [{
                            ticks: {
                                beginAtZero: true
                            }
                        }]
                    }
                }
            })
            var ctx3 = document.getElementById("canvas-4").getContext('2d');
            ctx3.font = "15px Arial";
            ctx3.fillStyle = "rgba(0,96,255,0.5)";
            ctx3.lineWidth = 1;
            ctx3.textBaseline = 'middle';
            ctx3.fillText("当前在线 {{ usercount }} 用户", 10, 30);

        {% endblock %}
    </script>


    </body>

{% endblock %}


</html>
